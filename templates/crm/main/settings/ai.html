{% extends 'crm/base.html' %}
{% load static %}
{% block title %}{{title}} - {{settings.name}}{% endblock title %}
{% block content %}
<style>
    .switch-toggle-slider{
        margin-left: -37px;
        margin-top: 10px;
    
    }
    @media (max-width: 765px) {
        .switch-toggle-slider {
            margin-top: -30px;
        }
    }
    
</style>

    <!-- Content wrapper -->
    <div class="content-wrapper">

      <!-- Content -->
        <div class="container-xxl flex-grow-1 container-p-y">
          <h4 class="fw-bold py-3 mb-4">
              <span class="text-muted fw-light">CRM /</span> OpenAI Settings
            </h4>

            {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %} 
       {% if form.errors %}
       <div class="alert alert-danger">
          <strong>Error:</strong>
          <ul>
             {% for field, errors in form.errors.items %}
             {% for error in errors %}
             <li>{{ field }}: {{ error }}</li>
             {% endfor %}
             {% endfor %}
          </ul>
       </div>
       {% endif %}

       <form action="" method="post">
        {% csrf_token %}
       <div class="row mb-3">
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <label for="{{ form.openai_api.id_for_label }}" class="form-label">API Key<span class="text-danger">*</span></label>
                    {{ form.openai_api }}
                </div>
            </div>
        </div>
        <div class="col-md-6">
          <div class="card">
              <div class="card-body">
                  <label for="{{ form.max_token.id_for_label }}" class="form-label">Max Token<span class="text-danger">*</span></label>
                  {{ form.max_token }}
              </div>
          </div>
        </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-12">
          <div class="card">
              <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-md-6">
                        <label for="{{ form.is_enabled_for_user.id_for_label }}" class="form-label mt-3">Enable for user/clients</label>
                    </div>
                    <div class="col-md-6 d-flex justify-content-end">
                        <div class="flex-grow-1 text-end icon-state">
                            <label class="switch">
                                {{ form.is_enabled_for_user }}
                                <span class="switch-toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
                  <p class="mt-2">If enabled users or clients will get access to use AI tools.</p>
              </div>
          </div>
      </div>
  </div>

    <button class="btn btn-primary mb-5" type="submit">Save</button>
</form>


</div>
</div>
</div>

<!-- Container-fluid Ends-->

</div>




{% endblock content %}